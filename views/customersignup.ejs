<%- include("partials/header1.ejs") -%>

<html>
    <body>
        <style>
            .btn-primary {
                background-color: #000000; /* Replace with your preferred color code */
                color: #ffffff; /* Text color */
            }
          </style>
        <section class="sbSignUp">
            <main class="form-signin w-100 m-auto">
                <center>
                    <div style="width: 500px; height:100px ; margin:100px; padding:15px ">
                        <div >
                            <img style="width: 100px; height:100px" src="https://pluspng.com/img-png/user-png-icon-download-icons-logos-emojis-users-2240.png" alt="">
                        </div>
                        <form class="sbform" method="post" action="https://shoping-app-backend.onrender.com/users/register" onsubmit="submitForm(event)">
                            <h1 style="font-size: 25px;"><strong>Customer Sign up</strong></h1>
                            <!-- Other form elements -->
                
                            <!-- Name field -->
                            <div class="form-floating">
                                <div style="width: 300px;">
                                    <input type="text" class="form-control" id="floatingInputName" placeholder="Enter Name" name="name" required oninput="document.getElementById('signbtnsb').disabled = !this.value.trim() || !document.getElementById('floatingInputEmail').value.trim() || !document.getElementById('floatingPassword').value.trim() || !document.getElementById('floatingPasswordConfirm').value.trim()" />
                                </div>
                            </div>
                
                            <!-- Email field -->
                            <div class="form-floating" style="margin-top: 10px;">
                                <div style="width: 300px;">
                                    <input type="email" class="form-control" id="floatingInputEmail" placeholder="name@example.com" name="email" required oninput="document.getElementById('signbtnsb').disabled = !this.value.trim() || !document.getElementById('floatingInputName').value.trim() || !document.getElementById('floatingPassword').value.trim() || !document.getElementById('floatingPasswordConfirm').value.trim()" />
                                </div>
                            </div>
                
                            <!-- Password field -->
                            <div class="form-floating" style="margin-top: 10px;">
                                <div style="width: 300px;">
                                    <input type="password" class="form-control" id="floatingPassword" placeholder="Password" name="password" required oninput="document.getElementById('signbtnsb').disabled = !this.value.trim() || !document.getElementById('floatingInputName').value.trim() || !document.getElementById('floatingInputEmail').value.trim() || !document.getElementById('floatingPasswordConfirm').value.trim()" />
                                </div>
                            </div>
                
                            <!-- Re-enter Password field -->
                            <div class="form-floating" style="margin-top: 10px;">
                                <div style="width: 300px;">
                                    <input type="password" class="form-control" id="floatingPasswordConfirm" placeholder="Re-Enter Password" name="reenteredPassword" required oninput="document.getElementById('signbtnsb').disabled = !this.value.trim() || !document.getElementById('floatingInputName').value.trim() || !document.getElementById('floatingInputEmail').value.trim() || !document.getElementById('floatingPassword').value.trim()" />
                                </div>
                            </div>
                
                            <!-- Submit button -->
                            <div style="margin-top: 10px;">
                                <div style="width: 200px;">
                                    <button class="btn btn-primary w-100 py-2" type="submit" id="signbtnsb" disabled>Sign Up</button>
                                </div>
                            </div>
                        </form>
                        
                    </div>
                </center>
             
               
                
            </main>
        </section>
        <script>
            function submitForm(event) {
                event.preventDefault(); // Prevent the default form submission
        
                // Get form data
                const form = event.target;
                const formData = new FormData(form);
        
                // Convert form data to JSON
                const jsonPayload = {};
                formData.forEach((value, key) => {
                    jsonPayload[key] = value;
                });
        
                // Perform the POST request
                fetch(form.action, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(jsonPayload),
                })
                .then(response => {
                    if (response.status === 201) {
                        // Redirect to the login page upon successful registration
                        alert('succefully registered');
                        window.location.href = '/loginre'; // Change this URL to match your login page route
                    } else {
                        // Handle other status codes or errors
                        console.error('Registration failed.');
                    }
                })
                .catch(error => {
                    // Handle errors
                    console.error('Error:', error);
                });
            }
        </script>

    </body>
</html>

